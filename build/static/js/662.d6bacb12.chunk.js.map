{"version":3,"file":"static/js/662.d6bacb12.chunk.js","mappings":"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","sources":["sitemap/index.tsx"],"sourcesContent":["import React from \"react\";\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\nimport useSWR from \"swr\";\n\nimport { CRUD_MODE, CRUD_MODE_HOSTNAMES } from \"../env\";\nimport { useLocale } from \"../hooks\";\nimport { Loading } from \"../ui/atoms/loading\";\nimport { PageContentContainer } from \"../ui/atoms/page-content\";\n\nimport \"./index.scss\";\nimport NoteCard from \"../ui/molecules/notecards\";\n\ninterface SearchIndexDoc {\n  url: string;\n  title: string;\n}\n\nexport default function Sitemap() {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const locale = useLocale();\n\n  // Because you can load this app with something like `/en-us/_sitemap/Web/`\n  // we have to pretend that didn't happen and force it to be `/en-US/_sitemap/Web`\n  const pathname = location.pathname.endsWith(\"/\")\n    ? location.pathname.slice(0, -1)\n    : location.pathname;\n\n  // `pathname` is going to be something like `/en-US/_sitemap/Web/Foo`.\n  // Transform that to be just `en-us/docs/web/foo`.\n  const searchPathname = pathname\n    .replace(`/${locale}/_sitemap`, `/${locale}/docs`)\n    .toLowerCase();\n\n  React.useEffect(() => {\n    document.title = \"Sitemap\";\n  }, []);\n\n  const { data, error } = useSWR<SearchIndexDoc[] | null, Error | null>(\n    `/${locale}/search-index.json`,\n    async (url) => {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`${response.status} on ${response.url}`);\n      }\n      return (await response.json()) as SearchIndexDoc[];\n    },\n    {\n      revalidateOnFocus: false,\n    }\n  );\n\n  const [docs, setDocs] = React.useState<SearchIndexDoc[] | null>(null);\n  React.useEffect(() => {\n    if (data) {\n      const theseDocs = [...data].sort((a, b) => a.url.localeCompare(b.url));\n      setDocs(theseDocs);\n    }\n  }, [data]);\n\n  const [childCounts, setChildCounts] = React.useState<Map<string, number>>(\n    new Map()\n  );\n  React.useEffect(() => {\n    const counts = new Map<string, number>();\n    if (docs) {\n      for (const { url } of docs) {\n        const split = url.split(\"/\");\n        const root = split.slice(0, 3);\n        split.slice(3).forEach((portion, i) => {\n          root.push(portion);\n          const key = root.join(\"/\");\n          counts.set(key, (counts.get(key) || 0) + 1);\n        });\n      }\n      setChildCounts(counts);\n    }\n  }, [docs]);\n\n  const [thisDoc, setThisDoc] = React.useState<SearchIndexDoc | null>(null);\n  React.useEffect(() => {\n    if (docs) {\n      const newThisDoc = docs.find((doc) => {\n        return doc.url.toLowerCase() === searchPathname;\n      });\n      setThisDoc(newThisDoc || null);\n    }\n  }, [searchPathname, docs]);\n\n  const [searchFilter, setSearchFilter] = React.useState(\"\");\n  React.useEffect(() => {\n    setSearchFilter(\"\");\n  }, [pathname]);\n  const [searchSubmitted, setSearchSubmitted] = React.useState(false);\n\n  const [filtered, setFiltered] = React.useState<SearchIndexDoc[] | null>(null);\n  React.useEffect(() => {\n    if (docs) {\n      const depth = searchPathname.split(\"/\").length;\n      const newFiltered = docs.filter((doc) => {\n        if (\n          doc.url.toLowerCase().startsWith(searchPathname) &&\n          depth + 1 === doc.url.split(\"/\").length\n        ) {\n          const baseName = doc.url.split(\"/\").slice(-1)[0].toLowerCase();\n          if (!baseName.startsWith(searchFilter.toLowerCase())) {\n            return false;\n          }\n          return true;\n        }\n        return false;\n      });\n      setFiltered(newFiltered);\n    }\n  }, [searchPathname, docs, searchFilter]);\n\n  const [highlightIndex, setHighlightIndex] = React.useState(0);\n  React.useEffect(() => {\n    setHighlightIndex(0);\n  }, [searchFilter]);\n\n  React.useEffect(() => {\n    if (searchSubmitted) {\n      if (filtered && filtered.length >= 1) {\n        const slug = filtered[highlightIndex].url.split(\"/\").slice(3);\n        setSearchFilter(\"\");\n        setSearchSubmitted(false);\n        navigate(`/${locale}/_sitemap/${slug.join(\"/\")}`);\n      }\n    }\n  }, [locale, filtered, searchSubmitted, navigate, highlightIndex]);\n\n  function changeHighlight(direction: \"up\" | \"down\") {\n    if (direction === \"up\") {\n      let nextNumber = highlightIndex - 1;\n      if (filtered) {\n        nextNumber =\n          ((nextNumber % filtered.length) + filtered.length) % filtered.length;\n      }\n      setHighlightIndex(nextNumber);\n    } else {\n      let nextNumber = highlightIndex + 1;\n      if (filtered) {\n        nextNumber = nextNumber % filtered.length;\n      }\n      setHighlightIndex(nextNumber);\n    }\n  }\n\n  const [opening, setOpening] = React.useState<string | null>(null);\n  const [editorOpeningError, setEditorOpeningError] =\n    React.useState<Error | null>(null);\n  React.useEffect(() => {\n    let unsetOpeningTimer: ReturnType<typeof setTimeout>;\n    if (opening) {\n      unsetOpeningTimer = setTimeout(() => {\n        setOpening(null);\n      }, 3000);\n    }\n    return () => {\n      if (unsetOpeningTimer) {\n        clearTimeout(unsetOpeningTimer);\n      }\n    };\n  }, [opening]);\n\n  async function openInYourEditor(url: string) {\n    console.log(`Going to try to open ${url} in your editor`);\n    setOpening(url);\n    const sp = new URLSearchParams();\n    sp.set(\"url\", url);\n    try {\n      const response = await fetch(`/_open?${sp.toString()}`);\n      if (!response.ok) {\n        if (response.status >= 500) {\n          setEditorOpeningError(\n            new Error(`${response.status}: ${response.statusText}`)\n          );\n        } else {\n          const body = await response.text();\n          setEditorOpeningError(new Error(`${response.status}: ${body}`));\n        }\n      }\n    } catch (err: any) {\n      setEditorOpeningError(err);\n    }\n  }\n\n  return (\n    <PageContentContainer>\n      <div id=\"sitemap\">\n        {error && (\n          <NoteCard type=\"error\">\n            <h4>Error</h4>\n            <p>\n              <code>{error.toString()}</code>\n            </p>\n          </NoteCard>\n        )}\n\n        {editorOpeningError && (\n          <NoteCard type=\"error\">\n            <h4>Error opening in your editor</h4>\n            <p>\n              <code>{editorOpeningError.toString()}</code>\n            </p>\n          </NoteCard>\n        )}\n\n        {!data && !error && <Loading />}\n        <div className=\"opening-in-your-editor\">\n          {opening && (\n            <>\n              Opening{\" \"}\n              <code>{opening.slice(opening.length - 50, opening.length)}</code>{\" \"}\n              in your editor...\n            </>\n          )}\n        </div>\n        {filtered && (\n          <Breadcrumb\n            pathname={pathname}\n            thisDoc={thisDoc}\n            openInYourEditor={openInYourEditor}\n          />\n        )}\n        {filtered && (\n          <FilterForm\n            pathname={pathname}\n            searchFilter={searchFilter}\n            onUpdate={(text: string, submitted: boolean) => {\n              setSearchFilter(text);\n              setSearchSubmitted(submitted);\n            }}\n            onGoUp={() => {\n              // Navigate to the parent! ...if possible\n              const split = pathname.split(\"/\");\n              if (split.length >= 4) {\n                const parentPathname = split.slice(0, -1);\n                navigate(parentPathname.join(\"/\"));\n              }\n            }}\n            onChangeHighlight={changeHighlight}\n          />\n        )}\n        {filtered &&\n          filtered.length === 0 &&\n          (searchFilter ? (\n            <em>nothing found</em>\n          ) : (\n            <em>has no further sub-documents</em>\n          ))}\n        {filtered && !searchFilter && <GoBackUp pathname={pathname} />}\n        {filtered && filtered.length > 0 && (\n          <ShowTree\n            filtered={filtered}\n            childCounts={childCounts}\n            highlightIndex={highlightIndex}\n            openInYourEditor={openInYourEditor}\n          />\n        )}\n        <p className=\"footer-note\">\n          Note, this sitemap only shows documents. Not any other applications.\n        </p>\n      </div>\n    </PageContentContainer>\n  );\n}\n\nfunction GoBackUp({ pathname }: { pathname: string }) {\n  const parentPath = pathname.split(\"/\").slice(0, -1);\n  if (parentPath.length <= 2) {\n    return null;\n  }\n  const parentBasename = parentPath[parentPath.length - 1];\n\n  return (\n    <p>\n      <Link to={parentPath.join(\"/\")}>\n        ↖️ Back up to{\" \"}\n        {parentPath.length <= 3 ? <em>root</em> : <code>{parentBasename}</code>}\n      </Link>\n    </p>\n  );\n}\n\nfunction FilterForm({\n  pathname,\n  searchFilter,\n  onUpdate,\n  onGoUp,\n  onChangeHighlight,\n}: {\n  pathname: string;\n  searchFilter: string;\n  onUpdate: (text: string, submitted: boolean) => void;\n  onGoUp: () => void;\n  onChangeHighlight: (s: \"up\" | \"down\") => void;\n}) {\n  const [hideTip, setHideTip] = React.useState(false);\n\n  const [countBackspaces, setCountBackspaces] = React.useState(0);\n  React.useEffect(() => {\n    if (countBackspaces >= 2) {\n      setCountBackspaces(0);\n      onGoUp();\n    }\n  }, [countBackspaces, onGoUp]);\n\n  const inputRef = React.useRef<null | HTMLInputElement>(null);\n\n  const focusSearch = React.useCallback(\n    (event: KeyboardEvent) => {\n      if (inputRef.current && event.target) {\n        const target = event.target as HTMLElement;\n\n        if (target === inputRef.current) {\n          if (event.key === \"ArrowDown\") {\n            onChangeHighlight(\"down\");\n          } else if (event.key === \"ArrowUp\") {\n            onChangeHighlight(\"up\");\n          }\n        }\n\n        if (target.tagName === \"INPUT\" || target.tagName === \"TEXTAREA\") {\n          if (event.key === \"Backspace\" && event.target === inputRef.current) {\n            if (!searchFilter.trim()) {\n              setCountBackspaces((s) => s + 1);\n            }\n          } else {\n            setCountBackspaces(0);\n          }\n\n          if (event.key === \"Escape\") {\n            inputRef.current.blur();\n          }\n        } else {\n          if (event.key === \"T\" || event.key === \"t\") {\n            inputRef.current.focus();\n            setCountBackspaces(0);\n          }\n        }\n      }\n    },\n    [onChangeHighlight, searchFilter]\n  );\n\n  React.useEffect(() => {\n    window.document.addEventListener(\"keyup\", focusSearch);\n    return () => {\n      window.document.removeEventListener(\"keyup\", focusSearch);\n    };\n  }, [focusSearch]);\n  const prefixPathname = pathname.replace(`/_sitemap`, \"/docs\");\n\n  return (\n    <form\n      className=\"filter-form\"\n      onSubmit={(event) => {\n        event.preventDefault();\n        onUpdate(searchFilter.trim(), true);\n      }}\n    >\n      <code>{prefixPathname}</code>/\n      <input\n        type=\"search\"\n        ref={inputRef}\n        value={searchFilter}\n        onChange={(event) => {\n          onUpdate(event.target.value, false);\n        }}\n        onFocus={() => {\n          setHideTip(true);\n        }}\n        onBlur={() => {\n          setHideTip(false);\n        }}\n      />{\" \"}\n      {!hideTip && (\n        <small className=\"keyboard-tip\">\n          Tip! press <kbd>t</kbd> on your keyboard to focus on search filter\n        </small>\n      )}\n    </form>\n  );\n}\n\nfunction Breadcrumb({\n  pathname,\n  thisDoc,\n  openInYourEditor,\n}: {\n  pathname: string;\n  thisDoc: SearchIndexDoc | null;\n  openInYourEditor: (url: string) => void;\n}) {\n  const locale = useLocale();\n  const split = pathname.split(\"/\").slice(3);\n  const root = pathname.split(\"/\").slice(0, 2);\n  root.push(\"_sitemap\");\n\n  const isReadOnly = !CRUD_MODE_HOSTNAMES.includes(window.location.hostname);\n\n  return (\n    <>\n      <ul className=\"breadcrumb\">\n        <li className=\"first\">\n          {split.length ? <Link to={root.join(\"/\")}>root</Link> : <em>root</em>}\n        </li>\n        {split.map((portion, i) => {\n          const last = i === split.length - 1;\n          root.push(portion);\n          return (\n            <li key={`${portion}${i}`} className={last ? \"last\" : undefined}>\n              {last ? (\n                <code>{portion}</code>\n              ) : (\n                <Link to={root.join(\"/\")}>\n                  <code>{portion}</code>\n                </Link>\n              )}\n            </li>\n          );\n        })}\n        <li className=\"this-doc\">\n          <b>Go to:</b>{\" \"}\n          {thisDoc ? (\n            <>\n              <Link to={thisDoc.url}>\n                <em>{thisDoc.title}</em>\n              </Link>{\" \"}\n              {CRUD_MODE && !isReadOnly && (\n                <small>\n                  (\n                  <a\n                    href={thisDoc.url}\n                    role=\"img\"\n                    aria-label=\"Editor pen\"\n                    onClick={(event) => {\n                      event.preventDefault();\n                      openInYourEditor(thisDoc.url);\n                    }}\n                    title=\"Open in your editor\"\n                  >\n                    Edit\n                  </a>\n                  )\n                </small>\n              )}\n            </>\n          ) : (\n            <Link to={`/${locale}/`}>Home page</Link>\n          )}\n        </li>\n      </ul>\n    </>\n  );\n}\n\nfunction ShowTree({\n  filtered,\n  childCounts,\n  highlightIndex,\n  openInYourEditor,\n}: {\n  filtered: SearchIndexDoc[];\n  childCounts: Map<string, number>;\n  highlightIndex: number;\n  openInYourEditor: (url: string) => void;\n}) {\n  const locale = useLocale();\n  const isReadOnly = !CRUD_MODE_HOSTNAMES.includes(window.location.hostname);\n  return (\n    <div className=\"tree\">\n      <ul>\n        {filtered.map((doc, i) => {\n          const countChild = childCounts.get(doc.url) || 0;\n          return (\n            <li\n              key={doc.url}\n              className={highlightIndex === i ? \"highlight\" : undefined}\n            >\n              <Link\n                to={doc.url.replace(\"/docs/\", \"/_sitemap/\")}\n                title={doc.title}\n              >\n                <code>{doc.url.replace(`/${locale}/docs`, \"\")}</code>\n              </Link>{\" \"}\n              <small>\n                (\n                {countChild === 1\n                  ? \"1 document\"\n                  : `${countChild.toLocaleString()} documents`}\n                {\" | \"}\n                <Link to={doc.url} title={`Go to: ${doc.title}`}>\n                  View\n                </Link>\n                {!isReadOnly && \" | \"}\n                {!isReadOnly && (\n                  <Link\n                    to={doc.url}\n                    title={`Edit: ${doc.title}`}\n                    onClick={(event) => {\n                      event.preventDefault();\n                      openInYourEditor(doc.url);\n                    }}\n                  >\n                    Edit\n                  </Link>\n                )}\n                )\n              </small>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n"],"names":["Sitemap","location","useLocation","navigate","useNavigate","locale","useLocale","pathname","endsWith","slice","searchPathname","replace","toLowerCase","React","document","title","useSWR","url","fetch","response","ok","Error","status","json","revalidateOnFocus","data","error","docs","setDocs","theseDocs","sort","a","b","localeCompare","Map","childCounts","setChildCounts","counts","split","root","forEach","portion","i","push","key","join","set","get","thisDoc","setThisDoc","newThisDoc","find","doc","searchFilter","setSearchFilter","searchSubmitted","setSearchSubmitted","filtered","setFiltered","depth","length","newFiltered","filter","startsWith","highlightIndex","setHighlightIndex","slug","opening","setOpening","editorOpeningError","setEditorOpeningError","openInYourEditor","console","log","sp","URLSearchParams","toString","statusText","text","body","unsetOpeningTimer","setTimeout","clearTimeout","id","type","className","Breadcrumb","FilterForm","onUpdate","submitted","onGoUp","parentPathname","onChangeHighlight","direction","nextNumber","GoBackUp","ShowTree","parentPath","parentBasename","to","hideTip","setHideTip","countBackspaces","setCountBackspaces","inputRef","focusSearch","event","current","target","tagName","trim","s","blur","focus","window","addEventListener","removeEventListener","prefixPathname","onSubmit","preventDefault","ref","value","onChange","onFocus","onBlur","isReadOnly","CRUD_MODE_HOSTNAMES","hostname","map","last","undefined","CRUD_MODE","href","role","onClick","countChild","toLocaleString"],"sourceRoot":""}